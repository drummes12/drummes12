---
import Button from './Button.astro'
import GitHub from './icons/GitHub.astro'
import Link from './icons/Link.astro'

interface Props {
  class?: string
  size?: 'sm' | 'lg'
  title: string
  tags: {
    name: string
    class: string
    icon: any
  }[]
  image: string
  github?: string
  link?: string
}

const { class: className, size = 'sm', title, tags, image, github, link } = Astro.props
---

<article
  class={`${className} col-span-10 md:col-span-5 ${
    size === 'sm' ? 'lg:col-span-4' : 'lg:col-span-6'
  } flex flex-col gap-1`}
>
  <div
    class='relative rounded-xl p-8 w-full h-full hover:bg-black/10 hover:shadow-md hover:shadow-black/80 backdrop-blur-sm overflow-hidden border-2 border-white/5 hover:border-white/10 group'
  >
    <h2 class='font-bold text-xl text-white/90 sm:text-white/70 sm:group-hover:text-white/90'>{title}</h2>
    <img
      class={`absolute ${
        size === 'sm' ? 'lg:left-0 lg:rounded-e-xl' : 'lg:right-0 lg:rounded-s-xl'
      } right-0 max-lg:rounded-s-xl bottom-0 h-3/5 w-3/4 group-hover:scale-150 transition object-cover opacity-90 sm:opacity-50 sm:group-hover:opacity-90 group-hover:shadow-2xl group-hover:shadow-white/10 group-hover:contrast-125`}
      src={image}
      alt={`Image of project ${title}`}
    />
    <div class='absolute left-0 bottom-0 w-full h-full bg-gradient-to-t from-black to-25% to-transparent'></div>
    <ul
      class={`w-3/4 h-3/5 overflow-hidden absolute ${
        size === 'sm' ? 'lg:left-0' : 'lg:right-0'
      } right-0 bottom-0 p-8 flex flex-wrap-reverse ${
        size === 'sm' ? 'lg:justify-start' : 'lg:justify-end'
      } justify-end gap-1 content-baseline sm:contrast-75 sm:group-hover:contrast-100`}
    >
      {
        tags.slice(0, 5).map((tag) => (
          <li>
            <span class={`${tag.class} flex items-center gap-1 rounded-full text-[0.7rem] py-1 px-2`}>
              <tag.icon class='size-3' />
              {tag.name}
            </span>
          </li>
        ))
      }
    </ul>
  </div>
  <nav class='w-full flex gap-1'>
    {
      github && (
        <>
          <Button class='flex-1' href={github} color='from-black'>
            <GitHub class='size-8 text-white/90  sm:text-white/50 sm:group-hover:text-white/90 group-hover:scale-105 transition' />
          </Button>
        </>
      )
    }
    {
      link && (
        <Button class='flex-1' href={github} color='from-black'>
          <Link class='size-8 text-white/90  sm:text-white/50 sm:group-hover:text-white/90 group-hover:scale-105 transition' />
        </Button>
      )
    }
  </nav>
</article>
